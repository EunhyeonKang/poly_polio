---
layout: layout6
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>환율 그래프</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <style>
.chart-container {
  width: 400px;
  height: 300px;
  margin: 20px auto;
  border: 1px solid #ccc;
}

canvas {
  width: 100%;
  height: 100%;
}
table {
      border-collapse: collapse;
      width: 100%;
    }
    
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    
    th {
      background-color: #f2f2f2;
    }

  </style>
</head>
<body>
    <div class="cardBox">
        <!--차트가 그려질 부분-->
        <canvas id="myChart"></canvas>
    </div>
    <table id="trafficTable">
        <thead>
          <tr>
            <th>rownum</th>
            <th>selectedcount</th>
            <th>totalcount</th>
            <th>subwayid</th>
            <th>updnline</th>
            <th>trainlinenm</th>
            <th>statnfid</th>
            <th>statntid</th>
            <th>statnid</th>
            <th>statnnm</th>
            <th>ordkey</th>
            <th>subwaylist</th>
            <th>statnlist</th>
            <th>barvldt</th>
            <th>btrainno</th>
            <th>bstatnid</th>
            <th>bstatnnm</th>
            <th>recptndt</th>
            <th>arvlmsg2</th>
            <th>arvlmsg3</th>
            <th>arvlcd</th>
          </tr>
        </thead>
        <tbody>
          <!-- 데이터가 여기에 동적으로 채워짐-->
        </tbody>
      </table>
      
</body>

<script type="text/javascript">
    var context = document
        .getElementById('myChart')
        .getContext('2d');
    var myChart = new Chart(context, {
        type: 'line', // 차트의 형태
        data: { // 차트에 들어갈 데이터
            labels: [
                //x 축
                '1','2','3','4','5','6','7'
            ],
            datasets: [
                { //데이터
                    label: 'test1', //차트 제목
                    fill: false, // line 형태일 때, 선 안쪽을 채우는지 안채우는지
                    data: [
                        21,19,25,20,23,26,25 //x축 label에 대응되는 데이터 값
                    ],
                    backgroundColor: [
                        //색상
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        //경계선 색상
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1 //경계선 굵기
                }/* ,
                {
                    label: 'test2',
                    fill: false,
                    data: [
                        8, 34, 12, 24
                    ],
                    backgroundColor: 'rgb(157, 109, 12)',
                    borderColor: 'rgb(157, 109, 12)'
                } */
            ]
        },
        options: {
            scales: {
                yAxes: [
                    {
                        ticks: {
                            beginAtZero: true
                        }
                    }
                ]
            }
        }
    });
</script>
<script>
    // AJAX 요청을 통해 JSON 파일 가져오기
    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'traffic.json'); // traffic.json 파일 경로에 따라 수정해야 할 수 있습니다.
    xhr.onload = function() {
      if (xhr.status === 200) {
        const jsonData = JSON.parse(xhr.responseText);
        const tableBody = document.querySelector('#trafficTable tbody');

        // JSON 데이터를 테이블에 추가하는 함수
        function addRowToTable(data) {
          const newRow = document.createElement('tr');

          Object.values(data).forEach(value => {
            const cell = document.createElement('td');
            cell.textContent = value;
            newRow.appendChild(cell);
          });

          tableBody.appendChild(newRow);
        }

        // JSON 데이터의 각 객체를 순회하며 테이블에 추가
        jsonData.realtimestationarrival.row.forEach(rowData => {
          addRowToTable(rowData);
        });
      } else {
        console.error('Failed to load JSON file');
      }
    };
    xhr.send();
  </script>